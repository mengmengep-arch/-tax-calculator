<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏†‡∏≤‡∏©‡∏µ‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤ - ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥</title>

    <!-- PWA Meta Tags -->
    <meta name="description" content="‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏†‡∏≤‡∏©‡∏µ‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÉ‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÑ‡∏ó‡∏¢ ‡∏õ‡∏µ‡∏†‡∏≤‡∏©‡∏µ 2569">
    <meta name="theme-color" content="#667eea">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏†‡∏≤‡∏©‡∏µ">

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- Favicon & App Icons -->
    <link rel="icon" type="image/png" sizes="32x32" href="icons/icon-96x96.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icons/icon-72x72.png">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
    <link rel="apple-touch-icon" sizes="152x152" href="icons/icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="icons/icon-192x192.png">
    <link rel="apple-touch-icon" sizes="167x167" href="icons/icon-192x192.png">

    <!-- Splash Screen for iOS -->
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div>
                    <h1>üßÆ ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏†‡∏≤‡∏©‡∏µ‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤</h1>
                    <p class="subtitle">‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡πÉ‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÑ‡∏ó‡∏¢ (‡∏õ‡∏µ‡∏†‡∏≤‡∏©‡∏µ 2569)</p>
                </div>
                <div class="header-buttons">
                    <!-- Dark Mode Toggle -->
                    <div class="theme-toggle" onclick="toggleTheme()" title="‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ò‡∏µ‡∏° Light/Dark">
                        <span class="theme-toggle-icon" id="themeIcon">üåô</span>
                        <span class="theme-toggle-label" id="themeLabel">Dark</span>
                    </div>
                    <button class="btn-salary-slips" onclick="window.location.href='salary-slips.html'" title="‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏•‡∏¥‡∏õ‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏õ‡∏µ">
                        üìÑ ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏•‡∏¥‡∏õ
                    </button>
                    <button class="btn-reset" onclick="resetAllData()" title="‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà">
                        üîÑ Reset Data
                    </button>
                </div>
            </div>
        </header>

        <!-- Progress Bar -->
        <div class="progress-bar">
            <div class="progress-step active clickable" data-step="1" onclick="jumpToStep(1)" title="‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ">
                <div class="step-number">1</div>
                <div class="step-label">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ</div>
            </div>
            <div class="progress-step clickable" data-step="2" onclick="jumpToStep(2)" title="‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ">
                <div class="step-number">2</div>
                <div class="step-label">‡∏Ñ‡πà‡∏≤‡∏•‡∏î‡∏´‡∏¢‡πà‡∏≠‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô</div>
            </div>
            <div class="progress-step clickable" data-step="3" onclick="jumpToStep(3)" title="‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ">
                <div class="step-number">3</div>
                <div class="step-label">Simulation</div>
            </div>
            <div class="progress-step clickable" data-step="4" onclick="jumpToStep(4)" title="‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ">
                <div class="step-number">4</div>
                <div class="step-label">‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</div>
            </div>
        </div>

        <div class="wizard-container">
            <!-- Step 1: ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ -->
            <div class="wizard-step active" id="step1">
                <h2>üìä ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ</h2>

                <!-- Quick Templates -->
                <div class="quick-templates">
                    <div class="templates-header">
                        <div class="templates-title">
                            ‚ö° ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
                            <span class="template-badge">‡πÉ‡∏´‡∏°‡πà</span>
                        </div>
                        <div class="templates-subtitle">‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</div>
                    </div>
                    <div class="templates-grid">
                        <div class="template-card" onclick="applyTemplate('junior')">
                            <span class="template-icon">üë∂</span>
                            <div class="template-name">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô</div>
                            <div class="template-desc">‡∏à‡∏ö‡πÉ‡∏´‡∏°‡πà / ‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ô‡πâ‡∏≠‡∏¢</div>
                            <div class="template-salary">~25,000/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</div>
                        </div>
                        <div class="template-card" onclick="applyTemplate('single')">
                            <span class="template-icon">üë§</span>
                            <div class="template-name">‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÇ‡∏™‡∏î</div>
                            <div class="template-desc">‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå / ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏†‡∏≤‡∏£‡∏∞</div>
                            <div class="template-salary">~45,000/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</div>
                        </div>
                        <div class="template-card" onclick="applyTemplate('family')">
                            <span class="template-icon">üë®‚Äçüë©‚Äçüëß</span>
                            <div class="template-name">‡∏°‡∏µ‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß</div>
                            <div class="template-desc">‡∏°‡∏µ‡∏Ñ‡∏π‡πà‡∏™‡∏°‡∏£‡∏™ + ‡∏ö‡∏∏‡∏ï‡∏£</div>
                            <div class="template-salary">~60,000/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</div>
                        </div>
                        <div class="template-card" onclick="applyTemplate('senior')">
                            <span class="template-icon">üíº</span>
                            <div class="template-name">‡∏ú‡∏π‡πâ‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£</div>
                            <div class="template-desc">‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏™‡∏π‡∏á / ‡∏°‡∏µ‡∏†‡∏≤‡∏£‡∏∞‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏î‡∏π</div>
                            <div class="template-salary">~120,000/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</div>
                        </div>
                        <div class="template-card" onclick="applyTemplate('freelance')">
                            <span class="template-icon">üé®</span>
                            <div class="template-name">‡∏ü‡∏£‡∏µ‡πÅ‡∏•‡∏ô‡∏ã‡πå</div>
                            <div class="template-desc">‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡πÑ‡∏°‡πà‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô</div>
                            <div class="template-salary">~35,000/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</div>
                        </div>
                        <div class="template-card" onclick="applyTemplate('custom')">
                            <span class="template-icon">‚úèÔ∏è</span>
                            <div class="template-name">‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏≠‡∏á</div>
                            <div class="template-desc">‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á</div>
                            <div class="template-salary">‡∏õ‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏Ñ‡πà‡∏≤</div>
                        </div>
                    </div>
                </div>

                <div class="templates-divider"><span>‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á</span></div>

                <div class="form-group">
                    <label for="salary">‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (‡∏ö‡∏≤‡∏ó):</label>
                    <div class="input-with-slider">
                        <input type="text" id="salary" placeholder="‡πÄ‡∏ä‡πà‡∏ô 30,000">
                        <input type="range" id="salarySlider" min="0" max="200000" step="1000" value="30000">
                    </div>
                    <div class="slider-value">‡∏Ñ‡πà‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: <span id="salaryDisplay">30,000</span> ‡∏ö‡∏≤‡∏ó</div>
                </div>

                <div class="form-group">
                    <label for="bonus">‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏£‡∏ß‡∏°‡∏ï‡πà‡∏≠‡∏õ‡∏µ (‡∏ö‡∏≤‡∏ó):</label>
                    <div class="input-with-slider">
                        <input type="text" id="bonus" placeholder="‡πÄ‡∏ä‡πà‡∏ô 60,000">
                        <input type="range" id="bonusSlider" min="0" max="500000" step="10000" value="0">
                    </div>
                    <div class="slider-value">‡∏Ñ‡πà‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: <span id="bonusDisplay">0</span> ‡∏ö‡∏≤‡∏ó</div>
                </div>

                <div class="info-box">
                    <h4>üìã ‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ</h4>
                    <p>‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏£‡∏ß‡∏°‡∏ï‡πà‡∏≠‡∏õ‡∏µ: <strong id="totalIncomePreview">360,000</strong> ‡∏ö‡∏≤‡∏ó</p>
                    <p>‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ 50% (‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 100,000): <strong id="expensesPreview">100,000</strong> ‡∏ö‡∏≤‡∏ó</p>
                    <p>‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏™‡∏∏‡∏ó‡∏ò‡∏¥: <strong id="netIncomePreview">260,000</strong> ‡∏ö‡∏≤‡∏ó</p>
                </div>

                <button class="btn-next" onclick="nextStep(2)">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚Üí</button>
            </div>

            <!-- Step 2: ‡∏Ñ‡πà‡∏≤‡∏•‡∏î‡∏´‡∏¢‡πà‡∏≠‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô -->
            <div class="wizard-step" id="step2">
                <h2>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ ‡∏Ñ‡πà‡∏≤‡∏•‡∏î‡∏´‡∏¢‡πà‡∏≠‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô</h2>

                <div class="form-group">
                    <label>
                        <input type="checkbox" id="personalDeduction" checked disabled>
                        ‡∏Ñ‡πà‡∏≤‡∏•‡∏î‡∏´‡∏¢‡πà‡∏≠‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß (60,000 ‡∏ö‡∏≤‡∏ó)
                    </label>
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" id="spouseDeduction">
                        ‡∏Ñ‡∏π‡πà‡∏™‡∏°‡∏£‡∏™ (‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏î‡πâ) (60,000 ‡∏ö‡∏≤‡∏ó)
                    </label>
                </div>

                <div class="form-group">
                    <label for="childCount">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ö‡∏∏‡∏ï‡∏£ (‡∏Ñ‡∏ô‡∏•‡∏∞ 30,000 ‡∏ö‡∏≤‡∏ó):</label>
                    <div class="input-with-slider">
                        <input type="text" id="childCount" value="0" readonly>
                        <input type="range" id="childSlider" min="0" max="5" step="1" value="0">
                    </div>
                    <div class="slider-value">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: <span id="childDisplay">0</span> ‡∏Ñ‡∏ô (‡∏•‡∏î‡∏´‡∏¢‡πà‡∏≠‡∏ô: <span id="childDeductionDisplay">0</span> ‡∏ö‡∏≤‡∏ó)</div>
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" id="parentDeduction">
                        ‡∏ö‡∏¥‡∏î‡∏≤‡∏°‡∏≤‡∏£‡∏î‡∏≤‡∏ï‡∏ô‡πÄ‡∏≠‡∏á (30,000 ‡∏ö‡∏≤‡∏ó/‡∏Ñ‡∏ô)
                    </label>
                    <div class="sub-option" id="parentOptions" style="display: none;">
                        <select id="parentCount">
                            <option value="1">1 ‡∏Ñ‡∏ô (30,000 ‡∏ö‡∏≤‡∏ó)</option>
                            <option value="2">2 ‡∏Ñ‡∏ô (60,000 ‡∏ö‡∏≤‡∏ó)</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" id="parentSpouseDeduction">
                        ‡∏ö‡∏¥‡∏î‡∏≤‡∏°‡∏≤‡∏£‡∏î‡∏≤‡∏Ñ‡∏π‡πà‡∏™‡∏°‡∏£‡∏™ (30,000 ‡∏ö‡∏≤‡∏ó/‡∏Ñ‡∏ô)
                    </label>
                    <div class="sub-option" id="parentSpouseOptions" style="display: none;">
                        <select id="parentSpouseCount">
                            <option value="1">1 ‡∏Ñ‡∏ô (30,000 ‡∏ö‡∏≤‡∏ó)</option>
                            <option value="2">2 ‡∏Ñ‡∏ô (60,000 ‡∏ö‡∏≤‡∏ó)</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="socialSecurity">‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏™‡∏±‡∏á‡∏Ñ‡∏° (‡∏ö‡∏≤‡∏ó/‡∏õ‡∏µ):</label>
                    <div class="input-with-slider">
                        <input type="text" id="socialSecurity" placeholder="‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 10,000">
                        <input type="range" id="socialSecuritySlider" min="0" max="10000" step="100" value="9000">
                    </div>
                    <div class="slider-value">‡∏Ñ‡πà‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: <span id="socialSecurityDisplay">9,000</span> ‡∏ö‡∏≤‡∏ó</div>
                    <small>‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏™‡∏±‡∏á‡∏Ñ‡∏°: 750 ‡∏ö‡∏≤‡∏ó/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô = 9,000 ‡∏ö‡∏≤‡∏ó/‡∏õ‡∏µ (‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 10,000)</small>
                </div>

                <div class="info-box">
                    <h4>üìã ‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡πà‡∏≤‡∏•‡∏î‡∏´‡∏¢‡πà‡∏≠‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô</h4>
                    <p>‡∏Ñ‡πà‡∏≤‡∏•‡∏î‡∏´‡∏¢‡πà‡∏≠‡∏ô‡∏£‡∏ß‡∏°: <strong id="basicDeductionPreview">69,000</strong> ‡∏ö‡∏≤‡∏ó</p>
                </div>

                <div class="button-group">
                    <button class="btn-prev" onclick="prevStep(1)">‚Üê ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
                    <button class="btn-next" onclick="nextStep(3)">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚Üí</button>
                </div>
            </div>

            <!-- Step 3: Simulation (UI ‡πÉ‡∏´‡∏°‡πà: ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö) -->
            <div class="wizard-step" id="step3">
                <h2>üéØ ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏î‡∏´‡∏¢‡πà‡∏≠‡∏ô</h2>
                <p class="step-description">
                    ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ñ‡πà‡∏≤‡∏•‡∏î‡∏´‡∏¢‡πà‡∏≠‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ú‡∏ô 1 ‡πÅ‡∏•‡∏∞‡πÅ‡∏ú‡∏ô 2 ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏†‡∏≤‡∏©‡∏µ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏à‡πà‡∏≤‡∏¢
                </p>

                <!-- Summary Cards -->
                <div class="summary-cards-grid">
                    <!-- Baseline Card -->
                    <div class="summary-preview-card baseline">
                        <h4 class="card-title">üîµ ‡πÑ‡∏°‡πà‡∏•‡∏î‡∏´‡∏¢‡πà‡∏≠‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°</h4>
                        <p class="card-amount" id="baselineTaxPreview">0</p>
                        <p class="card-monthly" id="baselineTaxMonthlyPreview">0 ‡∏ö‡∏≤‡∏ó/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</p>
                    </div>

                    <!-- Plan 1 Card -->
                    <div class="summary-preview-card plan1">
                        <h4 class="card-title">üü¢ ‡πÅ‡∏ú‡∏ô 1</h4>
                        <p class="card-amount" id="plan1TaxPreview">0</p>
                        <p class="card-monthly" id="plan1TaxMonthlyPreview">0 ‡∏ö‡∏≤‡∏ó/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</p>
                        <p class="card-savings" id="plan1SavingsPreview">‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î: 0 ‡∏ö‡∏≤‡∏ó</p>
                    </div>

                    <!-- Plan 2 Card -->
                    <div class="summary-preview-card plan2">
                        <h4 class="card-title">üü° ‡πÅ‡∏ú‡∏ô 2</h4>
                        <p class="card-amount" id="plan2TaxPreview">0</p>
                        <p class="card-monthly" id="plan2TaxMonthlyPreview">0 ‡∏ö‡∏≤‡∏ó/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</p>
                        <p class="card-savings" id="plan2SavingsPreview">‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î: 0 ‡∏ö‡∏≤‡∏ó</p>
                    </div>
                </div>

                <!-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡πÅ‡∏ú‡∏ô 1 vs ‡πÅ‡∏ú‡∏ô 2 -->
                <div class="comparison-table-container" style="margin-bottom: 30px;">
                    <table class="deduction-comparison-table">
                        <thead>
                            <tr>
                                <th style="width: 35%; text-align: left;">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ñ‡πà‡∏≤‡∏•‡∏î‡∏´‡∏¢‡πà‡∏≠‡∏ô</th>
                                <th style="width: 30%; text-align: center; background: #e8f5e9; color: #4CAF50;">üü¢ ‡πÅ‡∏ú‡∏ô 1</th>
                                <th style="width: 30%; text-align: center; background: #fff9e6; color: #F57C00;">üü° ‡πÅ‡∏ú‡∏ô 2</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- ‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï -->
                            <tr class="deduction-row">
                                <td class="item-name">
                                    <div class="item-label">üõ°Ô∏è ‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï</div>
                                    <small class="item-sublabel">‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 100,000 ‡∏ö‡∏≤‡∏ó</small>
                                </td>
                                <td class="plan-cell">
                                    <div class="plan-control">
                                        <input type="checkbox" id="plan1_lifeInsurance_check" onchange="toggleDeductionRow('plan1', 'lifeInsurance')">
                                        <div class="slider-container" id="plan1_lifeInsurance_container" style="display: none;">
                                            <input type="range" id="plan1_lifeInsurance" min="0" max="100000" step="1000" value="0"
                                                   oninput="updateDeductionValue('plan1', 'lifeInsurance')" class="comparison-slider">
                                            <div class="slider-value-display">
                                                <span id="plan1_lifeInsurance_display">0</span> ‡∏ö‡∏≤‡∏ó
                                                <button type="button" class="max-btn" onclick="setMaxValue('plan1', 'lifeInsurance')">Max</button>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                                <td class="plan-cell">
                                    <div class="plan-control">
                                        <input type="checkbox" id="plan2_lifeInsurance_check" onchange="toggleDeductionRow('plan2', 'lifeInsurance')">
                                        <div class="slider-container" id="plan2_lifeInsurance_container" style="display: none;">
                                            <input type="range" id="plan2_lifeInsurance" min="0" max="100000" step="1000" value="0"
                                                   oninput="updateDeductionValue('plan2', 'lifeInsurance')" class="comparison-slider">
                                            <div class="slider-value-display">
                                                <span id="plan2_lifeInsurance_display">0</span> ‡∏ö‡∏≤‡∏ó
                                                <button type="button" class="max-btn" onclick="setMaxValue('plan2', 'lifeInsurance')">Max</button>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>

                            <!-- ‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û -->
                            <tr class="deduction-row">
                                <td class="item-name">
                                    <div class="item-label">üõ°Ô∏è ‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û</div>
                                    <small class="item-sublabel">‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 100,000 ‡∏ö‡∏≤‡∏ó</small>
                                </td>
                                <td class="plan-cell">
                                    <div class="plan-control">
                                        <input type="checkbox" id="plan1_healthInsurance_check" onchange="toggleDeductionRow('plan1', 'healthInsurance')">
                                        <div class="slider-container" id="plan1_healthInsurance_container" style="display: none;">
                                            <input type="range" id="plan1_healthInsurance" min="0" max="100000" step="1000" value="0"
                                                   oninput="updateDeductionValue('plan1', 'healthInsurance')" class="comparison-slider">
                                            <div class="slider-value-display">
                                                <span id="plan1_healthInsurance_display">0</span> ‡∏ö‡∏≤‡∏ó
                                                <button type="button" class="max-btn" onclick="setMaxValue('plan1', 'healthInsurance')">Max</button>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                                <td class="plan-cell">
                                    <div class="plan-control">
                                        <input type="checkbox" id="plan2_healthInsurance_check" onchange="toggleDeductionRow('plan2', 'healthInsurance')">
                                        <div class="slider-container" id="plan2_healthInsurance_container" style="display: none;">
                                            <input type="range" id="plan2_healthInsurance" min="0" max="100000" step="1000" value="0"
                                                   oninput="updateDeductionValue('plan2', 'healthInsurance')" class="comparison-slider">
                                            <div class="slider-value-display">
                                                <span id="plan2_healthInsurance_display">0</span> ‡∏ö‡∏≤‡∏ó
                                                <button type="button" class="max-btn" onclick="setMaxValue('plan2', 'healthInsurance')">Max</button>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>

                            <!-- ‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏ö‡∏≥‡∏ô‡∏≤‡∏ç -->
                            <tr class="deduction-row">
                                <td class="item-name">
                                    <div class="item-label">üí∞ ‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏ö‡∏≥‡∏ô‡∏≤‡∏ç</div>
                                    <small class="item-sublabel">15% ‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ, ‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ö PVD+RMF ‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 500,000</small>
                                </td>
                                <td class="plan-cell">
                                    <div class="plan-control">
                                        <input type="checkbox" id="plan1_pensionInsurance_check" onchange="toggleDeductionRow('plan1', 'pensionInsurance')">
                                        <div class="slider-container" id="plan1_pensionInsurance_container" style="display: none;">
                                            <input type="range" id="plan1_pensionInsurance" min="0" max="200000" step="5000" value="0"
                                                   oninput="updateDeductionValue('plan1', 'pensionInsurance')" class="comparison-slider">
                                            <div class="slider-value-display">
                                                <span id="plan1_pensionInsurance_display">0</span> ‡∏ö‡∏≤‡∏ó
                                                <button type="button" class="max-btn" onclick="setMaxValue('plan1', 'pensionInsurance')">Max</button>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                                <td class="plan-cell">
                                    <div class="plan-control">
                                        <input type="checkbox" id="plan2_pensionInsurance_check" onchange="toggleDeductionRow('plan2', 'pensionInsurance')">
                                        <div class="slider-container" id="plan2_pensionInsurance_container" style="display: none;">
                                            <input type="range" id="plan2_pensionInsurance" min="0" max="200000" step="5000" value="0"
                                                   oninput="updateDeductionValue('plan2', 'pensionInsurance')" class="comparison-slider">
                                            <div class="slider-value-display">
                                                <span id="plan2_pensionInsurance_display">0</span> ‡∏ö‡∏≤‡∏ó
                                                <button type="button" class="max-btn" onclick="setMaxValue('plan2', 'pensionInsurance')">Max</button>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>

                            <!-- ‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô‡∏™‡∏≥‡∏£‡∏≠‡∏á‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏ä‡∏µ‡∏û PVD -->
                            <tr class="deduction-row">
                                <td class="item-name">
                                    <div class="item-label">üí∞ ‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô PVD</div>
                                    <small class="item-sublabel">‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ö RMF+‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏ö‡∏≥‡∏ô‡∏≤‡∏ç ‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 500,000</small>
                                </td>
                                <td class="plan-cell">
                                    <div class="plan-control">
                                        <input type="checkbox" id="plan1_pvd_check" onchange="toggleDeductionRow('plan1', 'pvd')">
                                        <div class="slider-container" id="plan1_pvd_container" style="display: none;">
                                            <input type="range" id="plan1_pvd" min="0" max="500000" step="10000" value="0"
                                                   oninput="updateDeductionValue('plan1', 'pvd')" class="comparison-slider">
                                            <div class="slider-value-display">
                                                <span id="plan1_pvd_display">0</span> ‡∏ö‡∏≤‡∏ó
                                                <button type="button" class="max-btn" onclick="setMaxValue('plan1', 'pvd')">Max</button>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                                <td class="plan-cell">
                                    <div class="plan-control">
                                        <input type="checkbox" id="plan2_pvd_check" onchange="toggleDeductionRow('plan2', 'pvd')">
                                        <div class="slider-container" id="plan2_pvd_container" style="display: none;">
                                            <input type="range" id="plan2_pvd" min="0" max="500000" step="10000" value="0"
                                                   oninput="updateDeductionValue('plan2', 'pvd')" class="comparison-slider">
                                            <div class="slider-value-display">
                                                <span id="plan2_pvd_display">0</span> ‡∏ö‡∏≤‡∏ó
                                                <button type="button" class="max-btn" onclick="setMaxValue('plan2', 'pvd')">Max</button>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>

                            <!-- ‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô RMF -->
                            <tr class="deduction-row">
                                <td class="item-name">
                                    <div class="item-label">üí∞ ‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô RMF</div>
                                    <small class="item-sublabel">30% ‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ, ‡∏£‡∏ß‡∏°‡∏Å‡∏±‡∏ö PVD+‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏ö‡∏≥‡∏ô‡∏≤‡∏ç ‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 500,000</small>
                                </td>
                                <td class="plan-cell">
                                    <div class="plan-control">
                                        <input type="checkbox" id="plan1_rmf_check" onchange="toggleDeductionRow('plan1', 'rmf')">
                                        <div class="slider-container" id="plan1_rmf_container" style="display: none;">
                                            <input type="range" id="plan1_rmf" min="0" max="500000" step="10000" value="0"
                                                   oninput="updateDeductionValue('plan1', 'rmf')" class="comparison-slider">
                                            <div class="slider-value-display">
                                                <span id="plan1_rmf_display">0</span> ‡∏ö‡∏≤‡∏ó
                                                <button type="button" class="max-btn" onclick="setMaxValue('plan1', 'rmf')">Max</button>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                                <td class="plan-cell">
                                    <div class="plan-control">
                                        <input type="checkbox" id="plan2_rmf_check" onchange="toggleDeductionRow('plan2', 'rmf')">
                                        <div class="slider-container" id="plan2_rmf_container" style="display: none;">
                                            <input type="range" id="plan2_rmf" min="0" max="500000" step="10000" value="0"
                                                   oninput="updateDeductionValue('plan2', 'rmf')" class="comparison-slider">
                                            <div class="slider-value-display">
                                                <span id="plan2_rmf_display">0</span> ‡∏ö‡∏≤‡∏ó
                                                <button type="button" class="max-btn" onclick="setMaxValue('plan2', 'rmf')">Max</button>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>

                            <!-- ‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô Thai ESG -->
                            <tr class="deduction-row">
                                <td class="item-name">
                                    <div class="item-label">üå± ‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô Thai ESG</div>
                                    <small class="item-sublabel">‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 30% ‡∏Ç‡∏≠‡∏á‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ, ‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 300,000</small>
                                </td>
                                <td class="plan-cell">
                                    <div class="plan-control">
                                        <input type="checkbox" id="plan1_thaiEsg_check" onchange="toggleDeductionRow('plan1', 'thaiEsg')">
                                        <div class="slider-container" id="plan1_thaiEsg_container" style="display: none;">
                                            <input type="range" id="plan1_thaiEsg" min="0" max="300000" step="10000" value="0"
                                                   oninput="updateDeductionValue('plan1', 'thaiEsg')" class="comparison-slider">
                                            <div class="slider-value-display">
                                                <span id="plan1_thaiEsg_display">0</span> ‡∏ö‡∏≤‡∏ó
                                                <button type="button" class="max-btn" onclick="setMaxValue('plan1', 'thaiEsg')">Max</button>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                                <td class="plan-cell">
                                    <div class="plan-control">
                                        <input type="checkbox" id="plan2_thaiEsg_check" onchange="toggleDeductionRow('plan2', 'thaiEsg')">
                                        <div class="slider-container" id="plan2_thaiEsg_container" style="display: none;">
                                            <input type="range" id="plan2_thaiEsg" min="0" max="300000" step="10000" value="0"
                                                   oninput="updateDeductionValue('plan2', 'thaiEsg')" class="comparison-slider">
                                            <div class="slider-value-display">
                                                <span id="plan2_thaiEsg_display">0</span> ‡∏ö‡∏≤‡∏ó
                                                <button type="button" class="max-btn" onclick="setMaxValue('plan2', 'thaiEsg')">Max</button>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>

                            <!-- ‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô Thai ESGx -->
                            <tr class="deduction-row">
                                <td class="item-name">
                                    <div class="item-label">‚≠ê ‡∏Å‡∏≠‡∏á‡∏ó‡∏∏‡∏ô Thai ESGx (‡∏õ‡∏µ 2569)</div>
                                    <small class="item-sublabel">‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 30%, ‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 300,000</small>
                                </td>
                                <td class="plan-cell">
                                    <div class="plan-control">
                                        <input type="checkbox" id="plan1_thaiEsgx_check" onchange="toggleDeductionRow('plan1', 'thaiEsgx')">
                                        <div class="slider-container" id="plan1_thaiEsgx_container" style="display: none;">
                                            <input type="range" id="plan1_thaiEsgx" min="0" max="300000" step="10000" value="0"
                                                   oninput="updateDeductionValue('plan1', 'thaiEsgx')" class="comparison-slider">
                                            <div class="slider-value-display">
                                                <span id="plan1_thaiEsgx_display">0</span> ‡∏ö‡∏≤‡∏ó
                                                <button type="button" class="max-btn" onclick="setMaxValue('plan1', 'thaiEsgx')">Max</button>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                                <td class="plan-cell">
                                    <div class="plan-control">
                                        <input type="checkbox" id="plan2_thaiEsgx_check" onchange="toggleDeductionRow('plan2', 'thaiEsgx')">
                                        <div class="slider-container" id="plan2_thaiEsgx_container" style="display: none;">
                                            <input type="range" id="plan2_thaiEsgx" min="0" max="300000" step="10000" value="0"
                                                   oninput="updateDeductionValue('plan2', 'thaiEsgx')" class="comparison-slider">
                                            <div class="slider-value-display">
                                                <span id="plan2_thaiEsgx_display">0</span> ‡∏ö‡∏≤‡∏ó
                                                <button type="button" class="max-btn" onclick="setMaxValue('plan2', 'thaiEsgx')">Max</button>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>

                            <!-- ‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ö‡πâ‡∏≤‡∏ô -->
                            <tr class="deduction-row">
                                <td class="item-name">
                                    <div class="item-label">üè† ‡∏î‡∏≠‡∏Å‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ö‡πâ‡∏≤‡∏ô</div>
                                    <small class="item-sublabel">‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 100,000 ‡∏ö‡∏≤‡∏ó</small>
                                </td>
                                <td class="plan-cell">
                                    <div class="plan-control">
                                        <input type="checkbox" id="plan1_homeLoan_check" onchange="toggleDeductionRow('plan1', 'homeLoan')">
                                        <div class="slider-container" id="plan1_homeLoan_container" style="display: none;">
                                            <input type="range" id="plan1_homeLoan" min="0" max="100000" step="5000" value="0"
                                                   oninput="updateDeductionValue('plan1', 'homeLoan')" class="comparison-slider">
                                            <div class="slider-value-display">
                                                <span id="plan1_homeLoan_display">0</span> ‡∏ö‡∏≤‡∏ó
                                                <button type="button" class="max-btn" onclick="setMaxValue('plan1', 'homeLoan')">Max</button>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                                <td class="plan-cell">
                                    <div class="plan-control">
                                        <input type="checkbox" id="plan2_homeLoan_check" onchange="toggleDeductionRow('plan2', 'homeLoan')">
                                        <div class="slider-container" id="plan2_homeLoan_container" style="display: none;">
                                            <input type="range" id="plan2_homeLoan" min="0" max="100000" step="5000" value="0"
                                                   oninput="updateDeductionValue('plan2', 'homeLoan')" class="comparison-slider">
                                            <div class="slider-value-display">
                                                <span id="plan2_homeLoan_display">0</span> ‡∏ö‡∏≤‡∏ó
                                                <button type="button" class="max-btn" onclick="setMaxValue('plan2', 'homeLoan')">Max</button>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>

                            <!-- ‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ‡∏û‡∏¥‡πÄ‡∏®‡∏© 2 ‡πÄ‡∏ó‡πà‡∏≤ -->
                            <tr class="deduction-row">
                                <td class="item-name">
                                    <div class="item-label">üéÅ ‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ‡∏û‡∏¥‡πÄ‡∏®‡∏© 2 ‡πÄ‡∏ó‡πà‡∏≤</div>
                                    <small class="item-sublabel">‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤/‡∏Å‡∏µ‡∏¨‡∏≤/‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•</small>
                                </td>
                                <td class="plan-cell">
                                    <div class="plan-control">
                                        <input type="checkbox" id="plan1_donationDouble_check" onchange="toggleDeductionRow('plan1', 'donationDouble')">
                                        <div class="slider-container" id="plan1_donationDouble_container" style="display: none;">
                                            <input type="range" id="plan1_donationDouble" min="0" max="50000" step="1000" value="0"
                                                   oninput="updateDeductionValue('plan1', 'donationDouble')" class="comparison-slider">
                                            <div class="slider-value-display">
                                                <span id="plan1_donationDouble_display">0</span> ‡∏ö‡∏≤‡∏ó
                                                <button type="button" class="max-btn" onclick="setMaxValue('plan1', 'donationDouble')">Max</button>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                                <td class="plan-cell">
                                    <div class="plan-control">
                                        <input type="checkbox" id="plan2_donationDouble_check" onchange="toggleDeductionRow('plan2', 'donationDouble')">
                                        <div class="slider-container" id="plan2_donationDouble_container" style="display: none;">
                                            <input type="range" id="plan2_donationDouble" min="0" max="50000" step="1000" value="0"
                                                   oninput="updateDeductionValue('plan2', 'donationDouble')" class="comparison-slider">
                                            <div class="slider-value-display">
                                                <span id="plan2_donationDouble_display">0</span> ‡∏ö‡∏≤‡∏ó
                                                <button type="button" class="max-btn" onclick="setMaxValue('plan2', 'donationDouble')">Max</button>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>

                            <!-- ‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ‡∏û‡∏£‡∏£‡∏Ñ‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡∏≠‡∏á -->
                            <tr class="deduction-row">
                                <td class="item-name">
                                    <div class="item-label">üó≥Ô∏è ‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ‡∏û‡∏£‡∏£‡∏Ñ‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏∑‡∏≠‡∏á</div>
                                    <small class="item-sublabel">‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 10,000 ‡∏ö‡∏≤‡∏ó</small>
                                </td>
                                <td class="plan-cell">
                                    <div class="plan-control">
                                        <input type="checkbox" id="plan1_donationPolitical_check" onchange="toggleDeductionRow('plan1', 'donationPolitical')">
                                        <div class="slider-container" id="plan1_donationPolitical_container" style="display: none;">
                                            <input type="range" id="plan1_donationPolitical" min="0" max="10000" step="500" value="0"
                                                   oninput="updateDeductionValue('plan1', 'donationPolitical')" class="comparison-slider">
                                            <div class="slider-value-display">
                                                <span id="plan1_donationPolitical_display">0</span> ‡∏ö‡∏≤‡∏ó
                                                <button type="button" class="max-btn" onclick="setMaxValue('plan1', 'donationPolitical')">Max</button>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                                <td class="plan-cell">
                                    <div class="plan-control">
                                        <input type="checkbox" id="plan2_donationPolitical_check" onchange="toggleDeductionRow('plan2', 'donationPolitical')">
                                        <div class="slider-container" id="plan2_donationPolitical_container" style="display: none;">
                                            <input type="range" id="plan2_donationPolitical" min="0" max="10000" step="500" value="0"
                                                   oninput="updateDeductionValue('plan2', 'donationPolitical')" class="comparison-slider">
                                            <div class="slider-value-display">
                                                <span id="plan2_donationPolitical_display">0</span> ‡∏ö‡∏≤‡∏ó
                                                <button type="button" class="max-btn" onclick="setMaxValue('plan2', 'donationPolitical')">Max</button>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>

                            <!-- Easy E-Receipt -->
                            <tr class="deduction-row">
                                <td class="item-name">
                                    <div class="item-label">üõí Easy E-Receipt (‡∏ä‡∏≠‡∏õ‡∏î‡∏µ‡∏°‡∏µ‡∏Ñ‡∏∑‡∏ô)</div>
                                    <small class="item-sublabel">‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 50,000 ‡∏ö‡∏≤‡∏ó</small>
                                </td>
                                <td class="plan-cell">
                                    <div class="plan-control">
                                        <input type="checkbox" id="plan1_easyEreceipt_check" onchange="toggleDeductionRow('plan1', 'easyEreceipt')">
                                        <div class="slider-container" id="plan1_easyEreceipt_container" style="display: none;">
                                            <input type="range" id="plan1_easyEreceipt" min="0" max="50000" step="1000" value="0"
                                                   oninput="updateDeductionValue('plan1', 'easyEreceipt')" class="comparison-slider">
                                            <div class="slider-value-display">
                                                <span id="plan1_easyEreceipt_display">0</span> ‡∏ö‡∏≤‡∏ó
                                                <button type="button" class="max-btn" onclick="setMaxValue('plan1', 'easyEreceipt')">Max</button>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                                <td class="plan-cell">
                                    <div class="plan-control">
                                        <input type="checkbox" id="plan2_easyEreceipt_check" onchange="toggleDeductionRow('plan2', 'easyEreceipt')">
                                        <div class="slider-container" id="plan2_easyEreceipt_container" style="display: none;">
                                            <input type="range" id="plan2_easyEreceipt" min="0" max="50000" step="1000" value="0"
                                                   oninput="updateDeductionValue('plan2', 'easyEreceipt')" class="comparison-slider">
                                            <div class="slider-value-display">
                                                <span id="plan2_easyEreceipt_display">0</span> ‡∏ö‡∏≤‡∏ó
                                                <button type="button" class="max-btn" onclick="setMaxValue('plan2', 'easyEreceipt')">Max</button>
                                            </div>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- ‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏•‡∏¥‡∏°‡∏¥‡∏ï‡∏£‡∏ß‡∏° -->
                <div class="limit-summary-grid">
                    <!-- ‡πÅ‡∏ú‡∏ô 1: ‡∏•‡∏¥‡∏°‡∏¥‡∏ï‡∏£‡∏ß‡∏° -->
                    <div class="limit-box plan1">
                        <h4 class="limit-title">üü¢ ‡πÅ‡∏ú‡∏ô 1 - ‡∏™‡∏£‡∏∏‡∏õ‡∏•‡∏¥‡∏°‡∏¥‡∏ï</h4>

                        <!-- ‡∏•‡∏¥‡∏°‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô 100K -->
                        <div class="limit-item">
                            <div class="limit-header">
                                <span class="limit-label">üõ°Ô∏è ‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô (‡∏£‡∏ß‡∏°):</span>
                                <span class="limit-value" id="plan1_insurance_total">0 / 100,000</span>
                            </div>
                            <div class="limit-bar-bg">
                                <div class="limit-bar" id="plan1_insurance_bar" style="width: 0%;"></div>
                            </div>
                            <div class="limit-warning-text" id="plan1_insurance_warning"></div>
                        </div>

                        <!-- ‡∏•‡∏¥‡∏°‡∏¥‡∏ï‡∏Å‡∏•‡∏∏‡πà‡∏° 500K -->
                        <div class="limit-item">
                            <div class="limit-header">
                                <span class="limit-label">üí∞ ‡∏Å‡∏•‡∏∏‡πà‡∏° 500K (‡∏£‡∏ß‡∏°):</span>
                                <span class="limit-value" id="plan1_retirement_total">0 / 500,000</span>
                            </div>
                            <div class="limit-bar-bg">
                                <div class="limit-bar" id="plan1_retirement_bar" style="width: 0%;"></div>
                            </div>
                            <div class="limit-warning-text" id="plan1_retirement_warning"></div>
                        </div>
                    </div>

                    <!-- ‡πÅ‡∏ú‡∏ô 2: ‡∏•‡∏¥‡∏°‡∏¥‡∏ï‡∏£‡∏ß‡∏° -->
                    <div class="limit-box plan2">
                        <h4 class="limit-title">üü° ‡πÅ‡∏ú‡∏ô 2 - ‡∏™‡∏£‡∏∏‡∏õ‡∏•‡∏¥‡∏°‡∏¥‡∏ï</h4>

                        <!-- ‡∏•‡∏¥‡∏°‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô 100K -->
                        <div class="limit-item">
                            <div class="limit-header">
                                <span class="limit-label">üõ°Ô∏è ‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô (‡∏£‡∏ß‡∏°):</span>
                                <span class="limit-value" id="plan2_insurance_total">0 / 100,000</span>
                            </div>
                            <div class="limit-bar-bg">
                                <div class="limit-bar" id="plan2_insurance_bar" style="width: 0%;"></div>
                            </div>
                            <div class="limit-warning-text" id="plan2_insurance_warning"></div>
                        </div>

                        <!-- ‡∏•‡∏¥‡∏°‡∏¥‡∏ï‡∏Å‡∏•‡∏∏‡πà‡∏° 500K -->
                        <div class="limit-item">
                            <div class="limit-header">
                                <span class="limit-label">üí∞ ‡∏Å‡∏•‡∏∏‡πà‡∏° 500K (‡∏£‡∏ß‡∏°):</span>
                                <span class="limit-value" id="plan2_retirement_total">0 / 500,000</span>
                            </div>
                            <div class="limit-bar-bg">
                                <div class="limit-bar" id="plan2_retirement_bar" style="width: 0%;"></div>
                            </div>
                            <div class="limit-warning-text" id="plan2_retirement_warning"></div>
                        </div>
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn-prev" onclick="prevStep(2)">‚Üê ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
                    <button class="btn-next" onclick="nextStep(4)">‡∏î‡∏π‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå ‚Üí</button>
                </div>
            </div>

            <!-- Step 4: ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå -->
            <div class="wizard-step" id="step4">
                <h2>üìä ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÅ‡∏•‡∏∞‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</h2>

                <div class="comparison-chart">
                    <canvas id="finalComparisonChart"></canvas>
                </div>

                <div class="pie-charts-container">
                    <div class="pie-chart-item">
                        <canvas id="plan1PieChart"></canvas>
                    </div>
                    <div class="pie-chart-item">
                        <canvas id="plan2PieChart"></canvas>
                    </div>
                </div>

                <div class="comparison-summary">
                    <div class="summary-card baseline">
                        <h3>üîµ ‡πÑ‡∏°‡πà‡∏•‡∏î‡∏´‡∏¢‡πà‡∏≠‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°</h3>
                        <div class="tax-amount" id="finalBaselineTax">0 ‡∏ö‡∏≤‡∏ó/‡∏õ‡∏µ</div>
                        <div class="monthly-amount" id="finalBaselineMonthly">0 ‡∏ö‡∏≤‡∏ó/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</div>
                    </div>

                    <div class="summary-card plan1">
                        <h3>üü¢ ‡πÅ‡∏ú‡∏ô 1</h3>
                        <div class="tax-amount" id="finalPlan1Tax">0 ‡∏ö‡∏≤‡∏ó/‡∏õ‡∏µ</div>
                        <div class="monthly-amount" id="finalPlan1Monthly">0 ‡∏ö‡∏≤‡∏ó/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</div>
                        <div class="savings">‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î: <span id="finalPlan1Savings">0</span> ‡∏ö‡∏≤‡∏ó/‡∏õ‡∏µ</div>
                    </div>

                    <div class="summary-card plan2">
                        <h3>üü° ‡πÅ‡∏ú‡∏ô 2</h3>
                        <div class="tax-amount" id="finalPlan2Tax">0 ‡∏ö‡∏≤‡∏ó/‡∏õ‡∏µ</div>
                        <div class="monthly-amount" id="finalPlan2Monthly">0 ‡∏ö‡∏≤‡∏ó/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</div>
                        <div class="savings">‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î: <span id="finalPlan2Savings">0</span> ‡∏ö‡∏≤‡∏ó/‡∏õ‡∏µ</div>
                    </div>
                </div>

                <div class="recommendation" id="recommendation">
                    <!-- ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏î‡∏¢ JavaScript -->
                </div>

                <div class="detailed-breakdown">
                    <h3>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÅ‡∏ú‡∏ô</h3>
                    <div id="detailedTables"></div>
                </div>

                <div class="button-group">
                    <button class="btn-prev" onclick="prevStep(3)">‚Üê ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
                    <button class="btn-export-pdf" onclick="exportTaxPDF()" title="‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏õ‡πá‡∏ô PDF">üì• Export PDF</button>
                    <button class="btn-success" onclick="startOver()">üîÑ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
                </div>
            </div>
        </div>

        <footer>
            <p>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏: ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏±‡∏ö‡∏Å‡∏£‡∏°‡∏™‡∏£‡∏£‡∏û‡∏≤‡∏Å‡∏£‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á</p>
        </footer>
    </div>

    <!-- Bottom Navigation (Mobile) -->
    <nav class="bottom-nav" id="bottomNav">
        <button class="bottom-nav-item active" onclick="jumpToStep(1)" data-step="1">
            <span class="nav-icon">üí∞</span>
            <span class="nav-label">‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ</span>
        </button>
        <button class="bottom-nav-item" onclick="jumpToStep(2)" data-step="2">
            <span class="nav-icon">üë®‚Äçüë©‚Äçüëß</span>
            <span class="nav-label">‡∏•‡∏î‡∏´‡∏¢‡πà‡∏≠‡∏ô</span>
        </button>
        <button class="bottom-nav-item" onclick="jumpToStep(3)" data-step="3">
            <span class="nav-icon">üéØ</span>
            <span class="nav-label">‡πÅ‡∏ú‡∏ô</span>
        </button>
        <button class="bottom-nav-item" onclick="jumpToStep(4)" data-step="4">
            <span class="nav-icon">üìä</span>
            <span class="nav-label">‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå</span>
        </button>
    </nav>

    <!-- Floating Summary (Mobile) -->
    <div class="floating-summary" id="floatingSummary">
        <button class="floating-summary-toggle" onclick="toggleFloatingSummary()">√ó</button>
        <div class="floating-summary-title">‡∏†‡∏≤‡∏©‡∏µ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏à‡πà‡∏≤‡∏¢ (‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì)</div>
        <div class="floating-summary-amount" id="floatingTaxAmount">0 ‡∏ö‡∏≤‡∏ó</div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="export-pdf.js"></script>
    <script src="script.js"></script>

    <!-- PWA Service Worker Registration -->
    <script>
        // Register Service Worker for PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then((registration) => {
                        console.log('‚úÖ Service Worker registered successfully:', registration.scope);

                        // Check for updates
                        registration.addEventListener('updatefound', () => {
                            const newWorker = registration.installing;
                            newWorker.addEventListener('statechange', () => {
                                if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                    // New version available
                                    showUpdateNotification();
                                }
                            });
                        });
                    })
                    .catch((error) => {
                        console.error('‚ùå Service Worker registration failed:', error);
                    });
            });
        }

        // Show update notification when new version is available
        function showUpdateNotification() {
            const notification = document.createElement('div');
            notification.className = 'pwa-update-notification';
            notification.innerHTML = `
                <div class="pwa-update-content">
                    <span>üîÑ ‡∏°‡∏µ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</span>
                    <button onclick="location.reload()">‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó</button>
                    <button onclick="this.parentElement.parentElement.remove()">‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á</button>
                </div>
            `;
            document.body.appendChild(notification);
        }

        // PWA Install Prompt
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            showInstallButton();
        });

        function showInstallButton() {
            // Check if install button already exists
            if (document.getElementById('pwaInstallBtn')) return;

            const installBtn = document.createElement('button');
            installBtn.id = 'pwaInstallBtn';
            installBtn.className = 'pwa-install-btn';
            installBtn.innerHTML = 'üì≤ ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏≠‡∏õ';
            installBtn.onclick = installPWA;

            // Add to header buttons
            const headerButtons = document.querySelector('.header-buttons');
            if (headerButtons) {
                headerButtons.insertBefore(installBtn, headerButtons.firstChild);
            }
        }

        async function installPWA() {
            if (!deferredPrompt) return;

            deferredPrompt.prompt();
            const { outcome } = await deferredPrompt.userChoice;

            if (outcome === 'accepted') {
                console.log('‚úÖ PWA installed');
                const installBtn = document.getElementById('pwaInstallBtn');
                if (installBtn) installBtn.remove();
            }

            deferredPrompt = null;
        }

        // Track PWA installation
        window.addEventListener('appinstalled', () => {
            console.log('‚úÖ PWA was installed');
            deferredPrompt = null;
        });
    </script>
</body>
</html>
